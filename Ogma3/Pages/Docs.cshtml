@page "{id}/{slug?}"
@using Utils.Extensions
@model Ogma3.Pages.Docs

@{
    ViewData["Title"] = Model.Document.Title;
}

<article class="document">
    <h1 class="header">@Model.Document.Title</h1>
    
    <div class="toc">
        @foreach (var h in Model.Headers)
        {
            <a href="#@h.Body.Friendlify()@(h.Occurrence > 0 ? "-" + h.Occurrence : "")"
               class="toc-h @("h" + h.Level)">
                @h.Body
            </a>
        }
    </div>
    
    <markdown>
        @Model.Document.Body
    </markdown>
</article>

<ul class="my-list border-top">
    @foreach (var ver in Model.Versions)
    {
        <li class="item">
            <a asp-page="/Docs" asp-route-id="@ver.Id" asp-route-slug="@ver.Slug">
                version @ver.Version — @ver.CreationTime
                @(ver.Version == Model.Document.Version ? "«" : "")
            </a>
        </li>
    }
</ul>
