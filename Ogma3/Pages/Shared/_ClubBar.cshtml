@using System.Globalization
@using Ogma3.Api.V1
@using Ogma3.Services
@model ClubBar

@{
    var tab = (string) ViewData["Tab"];
}

<div class="info-bar club-bar" id="club-bar">
    <div id="data-route" data-route="@Url.RouteUrl(nameof(ClubJoinController))"></div>
    <div id="data-id" data-id="@Model.Id"></div>

    <cdn-img class="img" src="@Model.Icon" alt="@Model.Name" loading="lazy" height="130" width="130"></cdn-img>

    <h1 class="name">@Model.Name</h1>

    <time class="date" datetime="@Model.CreationDate.ToString("yyyy-MM-dd HH:mm", CultureInfo.InvariantCulture)">
        Founded @Model.CreationDate.ToString("dd MMMM yyyy", CultureInfo.InvariantCulture)
    </time>

    <div class="info">
        <div class="user-count">@Model.UserCount @(Model.UserCount == 1 ? "member" : "members")</div>
        <div class="thread-count">@Model.ThreadCount @(Model.ThreadCount == 1 ? "thread" : "threads")</div>
        <div class="story-count">@Model.StoryCount @(Model.StoryCount == 1 ?"story" : "stories")</div>
    </div>
    
    <button class="button @(Model.IsMember ? "leave" : "join")" id="join-btn">
        @(Model.IsMember ? "Leave club" : "Join club")
    </button>

    <nav class="nav">
        <a class="nav-item @(tab == "Home" ? "active" : null)" asp-area="" asp-page="/Club/Index" asp-route-id="@Model.Id">
            Home
        </a>
        <a class="nav-item @(tab == "Members" ? "active" : null)" asp-area="" asp-page="/Club/Members" asp-route-id="@Model.Id">
            Members
        </a>
        <a class="nav-item @(tab == "Forums" ? "active" : null)" asp-area="" asp-page="/Club/Forums/Index" asp-route-id="@Model.Id">
            Forums
        </a>
        <a class="nav-item @(tab == "Stories" ? "active" : null)" asp-area="" asp-page="/User/Library" asp-route-id="@Model.Id">
            Stories
        </a>
    </nav>

</div>

@Html.Resource(@<script src="~/js/dist/club-bar.min.js" asp-append-version="true"></script>)