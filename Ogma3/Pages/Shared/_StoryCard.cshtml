@using System.Globalization
@using Utils.Extensions
@model StoryCard

<div class="story-card">

    <cdn-img class="image" src="@Model.Cover" alt="@Model.Title" loading="lazy" width="160" height="160"></cdn-img>
    
    <a asp-page="/Story" asp-route-id="@Model.Id" asp-route-slug="@Model.Slug" class="title">
        <img src="@Model.Rating.Icon" alt="Rated: @Model.Rating.Name" title="@Model.Rating.Name" class="rating">
        <h3>@Model.Title</h3>
    </a>
    
    <h4 class="author">
        <a asp-page="/User/Index" asp-route-name="@Model.AuthorName">By @Model.AuthorName</a>
    </h4>
    
    <div class="hook">
        <markdown>
            @Model.Hook
        </markdown>
    </div>
    
    <div class="tags">
        <partial name="_StoryStatus" model="@Model.Status" />
        @foreach (var t in Model.Tags)
        {
            <tag tag="t"></tag>
        }
    </div>
    
    <div class="info">
        <span class="word-count">@Model.WordCount.ToString("N0") words</span>
        <span class="chapter-count">@Model.ChapterCount chapters</span>
        <time class="release-date" datetime="@Model.ReleaseDate.ToString("yyyy-MM-dd HH:mm", CultureInfo.InvariantCulture)">
            published @Model.ReleaseDate.FormatDateWithDaySuffix()
        </time>
    </div>
</div>

