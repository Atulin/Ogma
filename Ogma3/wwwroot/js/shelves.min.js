var shelves_vue=new Vue({el:"#app",data:{form:{name:null,desc:null,pub:!1,quick:!1,color:null,id:null},lens:{minNameLength:3,maxNameLength:50,maxDescLength:255},showForm:!1,csrf:null,err:[],shelves:[],route:null},methods:{createShelf:function(a){var b=this;a.preventDefault();this.err=[];(this.form.name.length>this.lens.maxNameLength||this.form.name.length<this.lens.minNameLength)&&this.err.push("Name has to be between "+this.lens.minNameLength+" and "+this.lens.maxNameLength+" characters long.");
this.form.desc.length>this.lens.maxDescLength&&this.err.push("Description has to be less than "+this.lens.maxDescLength+" characters long.");0<this.err.length||this.form.name&&this.form.desc&&(null===this.form.id?axios.post(this.route,{name:this.form.name,description:this.form.desc,isPublic:this.form.pub,isQuick:this.form.quick,color:this.form.color},{headers:{RequestVerificationToken:this.csrf}}).then(function(a){b.getShelves()}).catch(function(a){console.log(a)}):axios.put(this.route+"/"+this.form.id,
{id:this.form.id,name:this.form.name,description:this.form.desc,isPublic:this.form.pub,isQuick:this.form.quick,color:this.form.color},{headers:{RequestVerificationToken:this.csrf}}).then(function(a){b.getShelves()}).catch(function(a){console.log(a)}).then(function(a){b.cancelEdit();b.showForm=!1}))},getShelves:function(){var a=this;axios.get(this.route+"/user").then(function(b){a.shelves=b.data}).catch(function(a){console.log(a)})},deleteShelf:function(a){var b=this;confirm("Delete permanently?")&&
axios.delete(this.route+"/"+a.id).then(function(a){b.getShelves()}).catch(function(a){console.log(a)})},editShelf:function(a){this.form.name=a.name;this.form.desc=a.description;this.form.id=a.id;this.form.color=a.color;this.form.quick=a.isQuick;this.form.pub=a.isPublic;this.showForm=!0},cancelEdit:function(){this.form.name=this.form.desc=this.form.id=this.form.color=null;this.form.isQuick=this.form.isPublic=!1}},mounted:function(){var a=this;this.route=document.getElementById("route").dataset.route;
this.csrf=document.querySelector("input[name=__RequestVerificationToken").value;axios.get(this.route+"/validation").then(function(b){a.lens=b.data}).catch(function(a){return console.error(a)});this.getShelves()}});
