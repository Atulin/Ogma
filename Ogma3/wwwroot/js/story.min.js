var story_vue=new Vue({el:"#story-app",data:{votesRoute:null,shelvesRoute:null,score:0,pool:null,didVote:!1,storyId:null,shelves:[],showShelves:!1},methods:{vote:function(){var a=this;axios.post(this.votesRoute,{votePool:Number(this.pool)}).then(function(b){a.score=b.data.count;a.didVote=b.data.didVote}).catch(console.error)},getShelves:function(){var a=this;axios.get(this.shelvesRoute+"/user").then(function(b){a.shelves=b.data}).catch(console.error)},addToShelf:function(a){var b=this;console.log(a,
this.storyId);axios.post(this.shelvesRoute+"/add/"+a+"/"+this.storyId,null,{headers:{RequestVerificationToken:this.csrf}}).then(function(a){console.log(a.data);b.getShelves()}).catch(console.error)}},mounted:function(){var a=this;this.pool=document.getElementById("pool-id").dataset.pool;this.storyId=document.getElementById("story-id").dataset.id;this.votesRoute=document.getElementById("votes-route").dataset.route;this.shelvesRoute=document.getElementById("shelves-route").dataset.route;this.csrf=document.querySelector("input[name=__RequestVerificationToken").value;
axios.get(this.votesRoute+"/"+this.pool).then(function(b){a.score=b.data.count;a.didVote=b.data.didVote}).catch(console.error);this.getShelves()}});
