let story_vue=new Vue({el:"#story-app",data:{votesRoute:null,shelvesRoute:null,readsRoute:null,csrf:null,score:0,didVote:!1,storyId:null,shelves:[],showShelves:!1,read:[]},methods:{vote:function(){axios.post(this.votesRoute,{storyId:Number(this.storyId)}).then(e=>{this.score=e.data.count,this.didVote=e.data.didVote}).catch(console.error)},getShelves:function(){axios.get(this.shelvesRoute+"/user/"+this.storyId).then(e=>{this.shelves=e.data||[]}).catch(console.error)},addToShelf:function(e){axios.post(this.shelvesRoute+"/add/"+e+"/"+this.storyId,null,{headers:{RequestVerificationToken:this.csrf}}).then(e=>{this.getShelves()}).catch(console.error)},markRead:function(e){axios.post(this.readsRoute,{story:this.storyId,chapter:e}).then(e=>{this.read=e.data.read||[]}).catch(console.error)}},mounted(){this.storyId=Number(document.getElementById("story-id").dataset.id),this.votesRoute=document.getElementById("votes-route").dataset.route,this.shelvesRoute=document.getElementById("shelves-route").dataset.route,this.readsRoute=document.getElementById("reads-route").dataset.route,this.csrf=document.querySelector("input[name=__RequestVerificationToken]").value,axios.get(this.votesRoute+"/"+this.storyId).then(e=>{this.score=e.data.count,this.didVote=e.data.didVote}).catch(console.error),axios.get(this.readsRoute+"/"+this.storyId).then(e=>{this.read=e.data.read||[]}).catch(console.error),this.getShelves()}});
//# sourceMappingURL=story.min.js.map
