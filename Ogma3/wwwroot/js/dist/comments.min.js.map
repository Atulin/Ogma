{"version":3,"sources":["comments.min.js"],"names":["comments_vue","Vue","el","data","body","thread","route","csrf","comments","methods","submit","e","preventDefault","axios","post","this","Number","headers","RequestVerificationToken","then","_","load","catch","console","error","get","params","res","map","val","key","reverse","enter","ctrlKey","date","dt","dayjs","format","[object Object]","document","getElementById","dataset","querySelector","value"],"mappings":"AAAA,IAAIA,aAAe,IAAIC,IAAI,CACvBC,GAAI,sBACJC,KAAM,CACFC,KAAM,KACNC,OAAQ,KACRC,MAAO,KACPC,KAAM,KACNC,SAAU,IAEdC,QAAS,CAGLC,OAAQ,SAAUC,GACdA,EAAEC,iBACFC,MAAMC,KAAKC,KAAKT,MACZ,CACIF,KAAMW,KAAKX,KACXC,OAAQW,OAAOD,KAAKV,SACtB,CACEY,QAAS,CAAEC,yBAA6BH,KAAKR,QAEhDY,KAAKC,IACFL,KAAKM,OACLN,KAAKX,KAAO,OAEfkB,MAAMC,QAAQC,QAIvBH,KAAM,WACFR,MAAMY,IAAIV,KAAKT,MAAO,CAACoB,OAAO,CAACrB,OAAOU,KAAKV,UACtCc,KAAKQ,IACFZ,KAAKP,SAAWmB,EAAIxB,KAAKyB,IACrB,CAACC,EAAKC,KAAQ,CAAED,IAAAA,EAAKC,IAAAA,KACvBC,YAELT,MAAMC,QAAQC,QAIvBQ,MAAO,SAASrB,GACRA,EAAEsB,SAASlB,KAAKL,OAAOC,IAI/BuB,KAAM,SAAUC,GACZ,OAAOC,MAAMD,GAAIE,OAAO,wBAKhCC,UACIvB,KAAKV,OAASkC,SAASC,eAAe,UAAUC,QAAQpC,OACxDU,KAAKT,MAAQiC,SAASC,eAAe,SAASC,QAAQnC,MACtDS,KAAKR,KAAOgC,SAASG,cAAc,yCAAyCC,MAC5E5B,KAAKM","file":"comments.min.js","sourcesContent":["let comments_vue = new Vue({\r\n    el: '#comments-container',\r\n    data: {\r\n        body: null,\r\n        thread: null,\r\n        route: null,\r\n        csrf: null,\r\n        comments: []\r\n    },\r\n    methods: {\r\n        \r\n        // Submit the comment, load comments again, clean textarea\r\n        submit: function (e) {\r\n            e.preventDefault();\r\n            axios.post(this.route, \r\n                {\r\n                    body: this.body,\r\n                    thread: Number(this.thread),\r\n                },{\r\n                    headers: { \"RequestVerificationToken\" : this.csrf }\r\n                })\r\n                .then(_ => {\r\n                    this.load();\r\n                    this.body = null;\r\n                })\r\n                .catch(console.error) \r\n        },\r\n        \r\n        // Load comments for the thread\r\n        load: function () {\r\n            axios.get(this.route, {params:{thread:this.thread}})\r\n                .then(res => {\r\n                    this.comments = res.data.map(\r\n                        (val, key) => ({val, key})\r\n                    ).reverse()\r\n;                }) \r\n                .catch(console.error)\r\n        },\r\n        \r\n        // Handle Enter key input\r\n        enter: function(e) {\r\n            if (e.ctrlKey) this.submit(e)\r\n        },\r\n        \r\n        // Parse date\r\n        date: function (dt) {\r\n            return dayjs(dt).format('DD MMM YYYY, HH:mm');\r\n        }\r\n        \r\n    },\r\n    \r\n    mounted() {\r\n        this.thread = document.getElementById('thread').dataset.thread;\r\n        this.route = document.getElementById('route').dataset.route;\r\n        this.csrf = document.querySelector('input[name=__RequestVerificationToken').value;\r\n        this.load();\r\n    }\r\n});\r\n"]}