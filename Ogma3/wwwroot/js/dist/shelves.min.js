let shelves_vue=new Vue({el:"#app",data:{form:{name:null,desc:null,pub:!1,quick:!1,color:null,icon:null,id:null},lens:{minNameLength:3,maxNameLength:50,maxDescLength:255},showForm:!1,csrf:null,err:[],shelves:[],route:null,owner:null},methods:{createShelf:function(e){e.preventDefault(),this.csrf=document.querySelector("input[name=__RequestVerificationToken").value,this.err=[],(this.form.name.length>this.lens.maxNameLength||this.form.name.length<this.lens.minNameLength)&&this.err.push(`Name has to be between ${this.lens.minNameLength} and ${this.lens.maxNameLength} characters long.`),this.form.desc&&this.form.desc.length>this.lens.maxDescLength&&this.err.push(`Description has to be less than ${this.lens.maxDescLength} characters long.`),this.err.length>0||this.form.name&&(null===this.form.id?axios.post(this.route,{name:this.form.name,description:this.form.desc,isPublic:this.form.pub,isQuick:this.form.quick,color:this.form.color,icon:Number(this.form.icon)},{headers:{RequestVerificationToken:this.csrf}}).then((e=>{this.getShelves()})).catch((e=>{console.log(e)})):axios.put(this.route+"/"+this.form.id,{id:this.form.id,name:this.form.name,description:this.form.desc,isPublic:this.form.pub,isQuick:this.form.quick,color:this.form.color,shelf:this.form.shelf,icon:Number(this.form.icon)},{headers:{RequestVerificationToken:this.csrf}}).then((e=>{this.getShelves()})).catch((e=>{console.log(e)})).then((e=>{this.cancelEdit(),this.showForm=!1})))},getShelves:function(){axios.get(this.route+"/user/"+this.owner).then((e=>{this.shelves=e.data})).catch((e=>{console.log(e)}))},deleteShelf:function(e){confirm("Delete permanently?")&&axios.delete(this.route+"/"+e.id,null,{headers:{RequestVerificationToken:this.csrf}}).then((e=>{this.getShelves()})).catch((e=>{console.log(e)}))},editShelf:function(e){console.log(e),this.form.name=e.name,this.form.desc=e.description,this.form.id=e.id,this.form.color=e.color,this.form.quick=e.isQuick,this.form.pub=e.isPublic,this.form.icon=e.iconId,this.showForm=!0},cancelEdit:function(){this.form.name=this.form.desc=this.form.id=this.form.color=null,this.form.isQuick=this.form.isPublic=!1}},mounted(){this.route=document.getElementById("route").dataset.route,this.owner=document.getElementById("owner").dataset.owner,axios.get(this.route+"/validation").then((e=>{this.lens=e.data})).catch((e=>console.error(e))),this.getShelves()}});
//# sourceMappingURL=shelves.min.js.map
