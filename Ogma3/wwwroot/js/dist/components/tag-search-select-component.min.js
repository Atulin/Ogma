Vue.component("tag-search-select",{props:{min:{type:Number,default:0},label:{type:String,required:!0},desc:{type:String,required:!1,default:null},validateMsg:{type:String,default:null},tagsApi:{type:String,required:!0},storyId:{type:Number,default:null}},data:function(){return{name:this.label.replace(/\s+/g,""),loading:!0,options:[],selected:[],search:""}},computed:{validate:function(){return this.selected.length>=this.min},validationString:function(){return this.validateMsg.replace("{0}",""+this.min)},filtered(){return this.options.filter(e=>(e.name.toLowerCase().includes(this.search.toLowerCase())||e.namespace.toLowerCase().includes(this.search.toLowerCase()))&&this.search.length>0)}},methods:{addUnique(e){this.selected.includes(e)||(this.selected.push(e),this.options.find(s=>s.id===e.id).hidden=!0)},remove(e){this.selected=this.selected.filter(s=>s.id!==e.id),this.options.find(s=>s.id===e.id).hidden=!1}},created(){axios.get(this.tagsApi).then(e=>{this.options=e.data,this.loading=!1,this.storyId&&axios.get(`${this.tagsApi}/story/${this.storyId}`).then(e=>{this.selected=e.data,this.selected.forEach(e=>this.options.find(s=>s.id===e.id).hidden=!0)}).catch(console.error)}).catch(console.error)},template:'\n        <div>\n            <select style="visibility: collapse; height: 0" :name="name" multiple="multiple" :id="name">\n                <option v-for="s in selected" :value="s.id" selected>{{s.name}}</option>\n            </select>\n    \n            <div class="o-form-group tag-search">\n                <label :for="name">{{label.replace( /([A-Z])/g, " $1" )}}</label>\n                <p class="desc" v-if="desc">{{desc}}</p>\n    \n                <div class="tags">\n                    <div class="tag" v-bind:style="{background: s.rgba}" v-for="s in selected">\n                        {{s.namespace ? s.namespace+\':\' : \'\'}}{{s.name}}\n                        <i class="material-icons-outlined" v-on:click="remove(s)">clear</i>\n                    </div>\n                </div>\n    \n                <input class="search" type="text" placeholder="Search..." v-model="search">\n    \n                <ol v-if="!loading" class="search-results">\n                    <li v-for="o in filtered" :style="{background: o.rgba}" :class="o.hidden ? \'hidden\' : null" v-on:click="addUnique(o)">\n                        <span class="name">{{o.namespace ? o.namespace+\':\' : \'\'}}{{o.name}}</span>\n                        <span class="desc">{{o.description}}</span>\n                    </li>\n                </ol>\n                \n                <span v-if="!validate && validateMsg">{{validationString}}</span>\n    \n            </div>\n        </div>\n    '});
//# sourceMappingURL=tag-search-select-component.min.js.map
