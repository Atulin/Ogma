/*!
 * Wellidate 2.2.0
 * https://github.com/NonFactors/Wellidate
 *
 * Copyright Â© NonFactors
 *
 * Licensed under the terms of the MIT License
 * http://www.opensource.org/licenses/mit-license.php
 */
!function(e,s){"function"==typeof define&&define.amd?define(["exports"],s):"object"==typeof module&&module.exports?s(module.exports):s(e)}(this,(e=>{class s{constructor(e,s){const t=this;t.rules={},t.bindings=[],t.isValid=!0,t.isDirty=!1,t.elements=s,t.element=s[0],t.wellidate=e,t.buildErrorContainers(),t.buildInputRules(),t.buildDataRules()}validate(){const e=[],s=this;s.isValid=!0;for(const t of Object.keys(s.rules)){const a=s.rules[t];if(a.isEnabled()){const i=a.isValid(s);i?"boolean"!=typeof i&&(e.push(i),s.pending(),i.then((e=>{s.isValid&&!e&&(s.isValid=!1,s.error(t))}))):(s.isValid=!1,s.error(t));break}}return e.length?Promise.all(e).then((e=>{s.isValid&&e.every(Boolean)&&s.success()})):s.isValid&&s.success(),s.isValid}reset(e){const s=this,t=s.wellidate;s.isDirty=!1,s.element.setCustomValidity("");for(const e of s.elements)e.classList.remove(t.inputErrorClass),e.classList.remove(t.inputValidClass),e.classList.remove(t.inputPendingClass);for(const a of s.errorContainers)a.classList.remove(t.fieldPendingClass),a.classList.remove(t.fieldErrorClass),a.classList.remove(t.fieldValidClass),a.innerHTML=e||"";s.element.dispatchEvent(new CustomEvent("wellidate-reset",{detail:{validatable:s},bubbles:!0}))}pending(e){const s=this.wellidate;for(const e of this.elements)e.classList.add(s.inputPendingClass),e.classList.remove(s.inputValidClass),e.classList.remove(s.inputErrorClass);for(const t of this.errorContainers)t.classList.remove(s.fieldErrorClass),t.classList.remove(s.fieldValidClass),t.classList.add(s.fieldPendingClass),t.innerHTML=e||"";this.element.dispatchEvent(new CustomEvent("wellidate-pending",{detail:{validatable:this},bubbles:!0}))}success(e){const s=this,t=s.wellidate;s.element.setCustomValidity("");for(const e of s.elements)e.classList.add(t.inputValidClass),e.classList.remove(t.inputErrorClass),e.classList.remove(t.inputPendingClass);for(const a of s.errorContainers)a.classList.remove(t.fieldPendingClass),a.classList.remove(t.fieldErrorClass),a.classList.add(t.fieldValidClass),a.innerHTML=e||"";s.element.dispatchEvent(new CustomEvent("wellidate-success",{detail:{validatable:s},bubbles:!0}))}error(e,s){const t=this,a=t.wellidate,i=e?t.rules[e]:null,l=s||i.formatMessage();t.isDirty=!0,t.element.setCustomValidity(l);for(const e of t.elements)e.classList.add(a.inputErrorClass),e.classList.remove(a.inputValidClass),e.classList.remove(a.inputPendingClass);for(const e of t.errorContainers)e.classList.remove(a.fieldPendingClass),e.classList.remove(a.fieldValidClass),e.classList.add(a.fieldErrorClass),e.innerHTML=l;t.element.dispatchEvent(new CustomEvent("wellidate-error",{detail:{message:l,validatable:t,method:e},bubbles:!0}))}bind(){const e=this,s=this.wellidate,t=e.element,a="SELECT"===t.tagName||"hidden"===t.type?"change":"input";function i(){("hidden"===this.type||e.isDirty)&&e.validate()}function l(){(e.isDirty||this.value.length)&&(e.isDirty=!e.validate())}function n(){s.focusCleanup&&e.reset(),s.lastActive=this}for(const s of e.elements)s.addEventListener("blur",l),s.addEventListener(a,i),s.addEventListener("focus",n);e.bindings.push(l,i,n)}unbind(){for(const e of this.bindings)for(const s of this.elements)s.removeEventListener("blur",e),s.removeEventListener("focus",e),s.removeEventListener("input",e),s.removeEventListener("change",e)}buildErrorContainers(){let e=this.element.name;e?(e=e.replace(/(["\]\\])/g,"\\$1"),this.errorContainers=Array.from(document.querySelectorAll(`[data-valmsg-for="${e}"]`))):this.errorContainers=[]}buildInputRules(){const e=this.rules,s=this.element,a=t.default.rule,i=t.default.rules;s.required&&i.required&&(e.required=Object.assign({},a,i.required,{element:s})),"email"===s.type&&i.email&&(e.email=Object.assign({},a,i.email,{element:s})),s.accept&&i.accept&&(e.accept=Object.assign({},a,i.accept,{types:s.accept,element:s})),s.getAttribute("minlength")&&i.minlength&&(e.minlength=Object.assign({},a,i.minlength,{min:s.getAttribute("minlength"),element:s})),s.getAttribute("maxlength")&&i.maxlength&&(e.maxlength=Object.assign({},a,i.maxlength,{max:s.getAttribute("maxlength"),element:s})),s.min&&i.min&&(e.min=Object.assign({},a,i.min,{value:s.min,element:s})),s.max&&i.max&&(e.max=Object.assign({},a,i.max,{value:s.max,element:s})),s.step&&i.step&&(e.step=Object.assign({},a,i.step,{value:s.step,element:s})),s.pattern&&i.regex&&(e.regex=Object.assign({},a,i.regex,{pattern:s.pattern,title:s.title,element:s}))}buildDataRules(){const e=this.element,s=t.default.rule,a=Array.from(e.attributes).filter((e=>/^data-val-\w+$/.test(e.name)));for(const i of a){const a=i.name,l=a.substring(9),n=this.rules[l]||t.default.rules[l];if(n){const t={message:i.value||n.message,isDataMessage:Boolean(i.value)};for(const s of Array.from(e.attributes))s.name.startsWith(a+"-")&&(t[s.name.substring(a.length+1)]=s.value);this.rules[l]=Object.assign({},s,n,t,{element:e})}}}}class t{constructor(e,s={}){const a=this;if(e.dataset.valId)return t.instances[parseInt(e.dataset.valId)].set(s);a.wasValidatedClass=t.default.classes.wasValidated,a.inputPendingClass=t.default.classes.inputPending,a.fieldPendingClass=t.default.classes.fieldPending,a.inputErrorClass=t.default.classes.inputError,a.inputValidClass=t.default.classes.inputValid,a.fieldErrorClass=t.default.classes.fieldError,a.fieldValidClass=t.default.classes.fieldValid,e.dataset.valId=t.instances.length.toString(),a.summary=a.extend(t.default.summary),a.focusCleanup=t.default.focusCleanup,a.focusInvalid=t.default.focusInvalid,a.excludes=t.default.excludes.slice(),a.include=t.default.include,a.container=e,a.validatables=[],"FORM"===e.tagName&&(e.noValidate=!0),a.set(s),a.bind(),t.instances.push(a)}set(e){const s=this;s.setOption("include",e.include),s.setOption("summary",e.summary),s.setOption("excludes",e.excludes),s.setOption("focusCleanup",e.focusCleanup),s.setOption("focusInvalid",e.focusInvalid),s.setOption("submitHandler",e.submitHandler),s.setOption("fieldValidClass",e.fieldValidClass),s.setOption("fieldErrorClass",e.fieldErrorClass),s.setOption("inputValidClass",e.inputValidClass),s.setOption("inputErrorClass",e.inputErrorClass),s.setOption("fieldPendingClass",e.fieldPendingClass),s.setOption("inputPendingClass",e.inputPendingClass),s.setOption("wasValidatedClass",e.wasValidatedClass),s.rebuild();for(const a of Object.keys(e.rules||{}))for(const i of s.filterValidatables(a)){const l=i.element;for(const n of Object.keys(e.rules[a])){const r=t.default.rule,o=e.rules[a][n],d=i.rules[n]||t.default.rules[n]||{};i.rules[n]=s.extend(r,d,o,{element:l})}}return s}rebuild(){const e=this,t=[];if(e.validatables.forEach((e=>e.unbind())),e.container.matches(e.include)){const a=e.buildGroupElements(e.container),i=e.validatables.find((e=>e.element===a[0]));t.push(i||new s(e,a)),t[t.length-1].bind()}else for(const a of e.container.querySelectorAll(e.include)){const i=e.buildGroupElements(a);if(a===i[0]){const l=e.validatables.find((e=>e.element===a));t.push(l||new s(e,i)),t[t.length-1].bind()}}e.validatables=t}form(...e){return!this.validateAndApply(...e).invalid.length}isValid(...e){for(const s of this.filterValidatables(...e)){for(const e of Object.keys(s.rules)){const t=s.rules[e];if(t.isEnabled()){const e=t.isValid(s);if(!e)return s.isValid=!1,!1;"boolean"!=typeof e&&e.then((e=>{e||(s.isValid=!1)}))}}s.isValid=!0}return!0}apply(e){for(const s of Object.keys(e))for(const t of this.filterValidatables(s)){const a=e[s];void 0!==a.error?t.error(null,a.error):void 0!==a.success?t.success(a.success):void 0!==a.reset&&t.reset(a.reset)}}validate(...e){const s={isValid:!0,pending:[],invalid:[],valid:[]};for(const t of this.filterValidatables(...e)){const e=[];t.isValid=!0;for(const a of Object.keys(t.rules)){const i=t.rules[a],l=!i.isEnabled()||i.isValid(t);if(!l){s.invalid.push({message:i.formatMessage(),validatable:t,method:a}),t.isValid=!1,s.isValid=!1;break}"boolean"!=typeof l&&(l.then((e=>{t.isValid=t.isValid&&e})),e.push({method:a,promise:l}),s.pending.some((e=>e.validatable===t))||s.pending.push({validatable:t,rules:e}))}t.isValid&&!e.length&&s.valid.push({validatable:t})}return s}reset(){const e=this;e.summary.reset(),e.container.classList.remove(e.wasValidatedClass);for(const s of e.validatables)s.reset()}extend(...e){const s={};for(const t of e)for(const e of Object.keys(t))"[object Object]"===Object.prototype.toString.call(s[e])?s[e]=this.extend(s[e],t[e]):s[e]=t[e];return s}setOption(e,s){const t=this;void 0!==s&&("[object Object]"===Object.prototype.toString.call(s)?t[e]=t.extend(t[e],s):t[e]=s)}buildGroupElements(e){if(e.name){const s=e.name.replace(/(["\]\\])/g,"\\$1");return Array.from(document.querySelectorAll(`[name="${s}"]`))}return[e]}focus(e){if(e.length){let s=e[0];for(let t=1;t<e.length;t++){if(this.lastActive===e[t].element){s=e[t];break}2===s.element.compareDocumentPosition(e[t].element)&&(s=e[t])}this.lastActive=s.element,this.focusCleanup&&s.reset(),s.element.focus()}}isExcluded(e){for(const s of this.excludes)if(e.matches(s))return!0;return!1}validateAndApply(...e){const s=this,t=s.validate(...e);for(const e of t.valid)e.validatable.success();for(const e of t.pending)e.validatable.pending(),Promise.all(e.rules.map((e=>e.promise))).then((s=>{const t=s.findIndex((e=>!e));t>=0?e.validatable.error(e.rules[t].method):e.validatable.success()}));for(const e of t.invalid)e.validatable.error(e.method);return s.summary.show(t),s.focusInvalid&&s.focus(t.invalid.map((e=>e.validatable))),s.container.classList.add(s.wasValidatedClass),t}filterValidatables(...e){return this.validatables.filter((s=>{for(const t of e)if(s.element.matches(t))return!0;return!e.length})).filter((e=>!this.isExcluded(e.element)))}bind(){const e=this;"FORM"===e.container.tagName&&(e.container.addEventListener("submit",(function(s){const t=e.validateAndApply();t.invalid.length?(s.preventDefault(),this.dispatchEvent(new CustomEvent("wellidate-invalid",{detail:{wellidate:e},bubbles:!0}))):(this.dispatchEvent(new CustomEvent("wellidate-valid",{detail:{wellidate:e},bubbles:!0})),e.submitHandler&&(s.preventDefault(),e.submitHandler(s,t)))})),e.container.addEventListener("reset",(()=>{e.reset()})))}}t.default={focusInvalid:!0,focusCleanup:!1,include:"input,textarea,select",summary:{container:"[data-valmsg-summary=true]",show(e){if(this.container){const s=document.querySelector(this.container);if(s){if(s.innerHTML="",e.isValid)s.classList.add("validation-summary-valid"),s.classList.remove("validation-summary-errors");else{s.classList.add("validation-summary-errors"),s.classList.remove("validation-summary-valid");const t=document.createElement("ul");for(const s of e.invalid){const e=document.createElement("li");e.innerHTML=s.message,t.appendChild(e)}s.appendChild(t)}for(const s of e.pending)Promise.all(s.rules.map((e=>e.promise))).then((e=>{const t=e.findIndex((e=>!e));t>=0&&this.append(s.validatable.rules[s.rules[t].method].formatMessage())}))}}},append(e){if(this.container){const s=document.querySelector(this.container);if(s){s.classList.add("validation-summary-errors"),s.classList.remove("validation-summary-valid");const t=document.createElement("ul"),a=document.createElement("li");a.innerHTML=e,t.appendChild(a),s.appendChild(t)}}},reset(){this.show({isValid:!0,pending:[],invalid:[],valid:[]})}},classes:{inputPending:"input-validation-pending",inputError:"input-validation-error",inputValid:"input-validation-valid",fieldPending:"input-validation-pending",fieldError:"field-validation-error",fieldValid:"field-validation-valid",wasValidated:"was-validated"},excludes:["input[type=button]","input[type=submit]","input[type=image]","input[type=reset]",":disabled"],rule:{trim:!0,message:"This field is not valid.",isValid:()=>!1,isEnabled:()=>!0,formatMessage(){return this.message},normalizeValue(e){const s=e||this.element;let t=s.value;if("SELECT"===s.tagName&&s.multiple)return Array.from(s.options).filter((e=>e.selected)).length.toString();if("radio"===s.type)if(s.name){const e=s.name.replace(/(["\]\\])/g,"\\$1"),a=document.querySelector(`input[name="${e}"]:checked`);t=a?a.value:""}else t=s.checked?t:"";else"file"===s.type&&(t.lastIndexOf("\\")>=0?t=t.substring(t.lastIndexOf("\\")+1):t.lastIndexOf("/")>=0&&(t=t.substring(t.lastIndexOf("/")+1)));return this.trim?t.trim():t}},rules:{required:{message:"This field is required.",isValid(){return Boolean(this.normalizeValue())}},equalto:{message:"Please enter the same value again.",isValid(){const e=document.getElementById(this.other);return e&&this.normalizeValue()===this.normalizeValue(e)}},length:{message:"Please enter a value between {0} and {1} characters long.",isValid(){const e=this,s=e.normalizeValue();return(null==e.min||e.min<=s.length)&&(s.length<=e.max||null==e.max)},formatMessage(){const e=this;return null==e.min||null!=e.max||e.isDataMessage?null!=e.min||null==e.max||e.isDataMessage?e.message.replace("{0}",e.min).replace("{1}",e.max):t.default.rules.maxlength.message.replace("{0}",e.max):t.default.rules.minlength.message.replace("{0}",e.min)}},minlength:{message:"Please enter at least {0} characters.",isValid(){return this.min<=this.normalizeValue().length},formatMessage(){return this.message.replace("{0}",this.min)}},maxlength:{message:"Please enter no more than {0} characters.",isValid(){return this.normalizeValue().length<=this.max},formatMessage(){return this.message.replace("{0}",this.max)}},email:{message:"Please enter a valid email address.",isValid(){return/^$|^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(this.normalizeValue())}},integer:{message:"Please enter a valid integer value.",isValid(){return/^$|^[+-]?\d+$/.test(this.normalizeValue())}},number:{groupSeparator:",",decimalSeparator:".",message:"Please enter a valid number.",scaleMessage:"Please enter a value with no more than {0} fractional digits",precisionMessage:"Please enter a value using no more than {0} significant digits",isValid(){const e=this,s=parseInt(e.scale),t=e.normalizeValue(),a=parseInt(e.precision),i=t.split(this.decimalSeparator);let l=new RegExp(`^$|^[+-]?(\\d*|\\d[0-9${this.groupSeparator}]*)[${this.decimalSeparator}]?\\d*$`).test(t);if(l&&t&&a>0){const t=e.digits(i[0].replace(new RegExp(`^[-+${this.groupSeparator}0]+`),""));e.isValidPrecision=t<=a-(s||0),l=e.isValidPrecision}else e.isValidPrecision=!0;if(l&&i[1]&&s>=0){const t=e.digits(i[1].replace(/0+$/,""));e.isValidScale=t<=s,l=e.isValidScale}else e.isValidScale=!0;return l},digits:e=>e.split("").filter((e=>!isNaN(parseInt(e)))).length,formatMessage(){const e=this;return!1!==e.isValidPrecision||e.isDataMessage?!1!==e.isValidScale||e.isDataMessage?e.message:e.scaleMessage.replace("{0}",parseInt(e.scale)||0):e.precisionMessage.replace("{0}",parseInt(e.precision)-(parseInt(e.scale)||0))}},digits:{message:"Please enter only digits.",isValid(){return/^\d*$/.test(this.normalizeValue())}},date:{message:"Please enter a valid date.",isValid(){return/^$|^\d{4}-(0?[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01])$/.test(this.normalizeValue())}},range:{message:"Please enter a value between {0} and {1}.",isValid(){const e=parseFloat(this.min),s=parseFloat(this.max),t=this.normalizeValue();return!t||(isNaN(e)||e<=t)&&(t<=s||isNaN(s))},formatMessage(){const e=this;return null==e.min||null!=e.max||e.isDataMessage?null!=e.min||null==e.max||e.isDataMessage?e.message.replace("{0}",e.min).replace("{1}",e.max):t.default.rules.max.message.replace("{0}",e.max):t.default.rules.min.message.replace("{0}",e.min)}},min:{message:"Please enter a value greater than or equal to {0}.",isValid(){const e=this.normalizeValue();return!e||parseFloat(this.value)<=e},formatMessage(){return this.message.replace("{0}",this.value)}},max:{message:"Please enter a value less than or equal to {0}.",isValid(){const e=this.normalizeValue();return!e||e<=parseFloat(this.value)},formatMessage(){return this.message.replace("{0}",this.value)}},greater:{message:"Please enter a value greater than {0}.",isValid(){const e=this.normalizeValue();return!e||parseFloat(this.than)<e},formatMessage(){return this.message.replace("{0}",this.than)}},lower:{message:"Please enter a value lower than {0}.",isValid(){const e=this.normalizeValue();return!e||e<parseFloat(this.than)},formatMessage(){return this.message.replace("{0}",this.than)}},step:{message:"Please enter a multiple of {0}.",isValid(){const e=this.normalizeValue();return!e||e%parseInt(this.value)==0},formatMessage(){return this.message.replace("{0}",this.value)}},filesize:{page:1024,message:"File size should not exceed {0} MB.",isValid(){return Array.from(this.element.files).reduce(((e,s)=>e+s.size),0)<=this.max||null==this.max},formatMessage(){const e=this,s=(e.max/e.page/e.page).toFixed(2);return e.message.replace("{0}",s.replace(/[.|0]*$/,""))}},accept:{message:"Please select files in correct format.",isValid(){const e=this.types.split(",").map((e=>e.trim())),s=Array.from(this.element.files).filter((s=>{const t=s.name.split(".").pop();for(const a of e)if(a.startsWith(".")){if(s.name!==t&&"."+t===a)return!0}else if(a.endsWith("/*")){if(s.type.startsWith(a.replace(/\*$/,"")))return!0}else if(s.type===a)return!0;return!e.length}));return this.element.files.length===s.length}},regex:{message:"Please enter value in a valid format. {0}",isValid(){const e=this.normalizeValue();return!e||!this.pattern||new RegExp(this.pattern).test(e)},formatMessage(){return this.message.replace("{0}",this.title||"")}},remote:{type:"get",message:"Please fix this field.",isValid(e){const s=this;return s.controller&&s.controller.abort(),clearTimeout(s.start),new Promise(((t,a)=>{s.start=setTimeout((()=>{e.isValid?(s.controller=new AbortController,s.prepare(e).then((e=>e.ok?e.text():"")).then((e=>{if(e){const a=JSON.parse(e);s.message=a.message||s.message,t(!1!==a.isValid)}else t(!0)})).catch((e=>{"AbortError"===e.name&&t(!0),a(e)}))):t(!0)}),1)}))},buildUrl(){const e=this,s=new URL(e.url,location.href),t=(e.additionalFields||"").split(",").filter(Boolean);for(const a of t){const t=document.querySelector(a);s.searchParams.append(t.name,e.normalizeValue(t)||"")}return s.searchParams.append(e.element.name,e.normalizeValue()||""),s.href},prepare(){return fetch(this.buildUrl(),{method:this.type,signal:this.controller.signal,headers:{"X-Requested-With":"XMLHttpRequest"}})}}}},t.instances=[],e.Wellidate=t,e.WellidateValidatable=s}));
//# sourceMappingURL=/sm/fbea16f1ca2f13291cf3c399ff8fd4003cedeceb1331fb30a08f514b9259644c.map